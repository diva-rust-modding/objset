use super::*;

const INPUT_TEX: &[u8] = &[
    0xF0, 0x00, 0x64, 0x01, 0xFA, 0x02, 0x00, 0x00, 0xF1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 00,
];

const IDENTITIY: Matrix4 = Matrix4 {
    x: Vec4 { x: 1., y: 0., z: 0., w: 0. },
    y: Vec4 { x: 0., y: 1., z: 0., w: 0. },
    z: Vec4 { x: 0., y: 0., z: 1., w: 0. },
    w: Vec4 { x: 0., y: 0., z: 0., w: 1. },
};

#[test]
fn read_texture() {
    let (_, tex) = Texture::parse(INPUT_TEX).unwrap();
    let tex = tex.unwrap();
    assert_eq!(tex.id, 762);
    assert_eq!(tex.weight, 1.0);
    assert_eq!(tex.flags.map, TextureMap::Color);
    assert_eq!(tex.coordinate_matrix, IDENTITIY);
}
